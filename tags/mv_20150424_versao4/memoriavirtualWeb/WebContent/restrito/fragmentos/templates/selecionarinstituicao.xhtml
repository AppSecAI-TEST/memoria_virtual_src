<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
<h:head />
<h:body>
	<ui:composition>
		<div class="col-md-12">
			<div class="erroPrincipal">
				<h:message id="resultado" for="resultado" infoClass="sucesso"
					errorClass="erro">
				</h:message>
			</div>
			<div class="widget wgreen">
				<div class="widget-head">
					<h1>#{mensagens.selecionarInstituicaoTitulo}</h1>
					<h2>#{mensagens.selecionarInstituicaoDescricao}</h2>
					<div class="clearfix"></div>
				</div>
				<div class="widget-content">
					<div class="col-md-12">
						<h:form class="form-vertical" role="form" method="post"
							prependId="false">
							<div class="row">
								<div class="col-md-6 col-md-offset-3">
									<div class="form-group contem-select2">
										<h:outputLabel for="id">#{mensagens.nome}</h:outputLabel>
										<h:inputHidden value="#{bean.id}" id="id" p:onChange="onIdChange();"/>
										<h:message id="validacao-nome" for="validacao-nome"
											infoClass="help-block has-success"
											errorClass="help-block has-error"
											warnClass="help-block has-warning">
										</h:message>
									</div>
								</div>
							</div>
							<div class="text-right row">
								<div class="col-md-12">
									<h:commandButton class="btn btn-success margin-5"
										value="#{acao}" action="#{bean.selecionarInstituicao}"
										id="selecionar">
									</h:commandButton>
									<h:commandButton id="cancelar"
										class="btn btn-danger margin-left-5 no-right-margin"
										value="#{mensagens.cancelar}" action="#{bean.cancelar}">
									</h:commandButton>
								</div>
							</div>
						</h:form>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			function onIdChange(){
				var id = document.getElementById("id");
				var b = document.getElementById("selecionar");
				if(id.value == "-1"){
					b.disabled = true;
				}else{
					b.disabled = false;
				}
			}
		
			$(document).ready(function() {
				selecionarAbaInstituicao();

				onIdChange();
				
				mostrarErro('#validacao-nome');
				
				$("#id").select2({
					minimumInputLength : 1,
					allowClear : true,
					ajax : {
						url : "/memoriavirtual/listar/listarinstituicoes",
						quietMillis : 250,
						type : 'GET',
						datatype : 'json',
						data : function(term, page) {
							return {
								busca : term,
							};
						},
						results: function (data) {
				          var results = [];
				          $.each(data, function(index, item){
				            results.push({
				              id: item.id,
				              text: item.nome
				            });
				          });
				          return { results: results };
				        }
					}
				});
			});
		</script>
	</ui:composition>
</h:body>
</html>